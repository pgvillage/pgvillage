---
- name: "Gather facts on all servers"
  hosts:
    - all
  become: true
  gather_facts: true

- name: Install Minio
  hosts:
    - backup
  become: true
  gather_facts: false
  roles:
    - minio
  tags:
    - minio

- name: Install wal-g
  hosts:
    - hacluster
  become: true
  gather_facts: false
  roles:
    - walg
  tags:
    - walg

- name: Install stolon
  hosts:
    - stolon
  become: true
  gather_facts: false
  roles:
    - stolon
  tags:
    - stolon
    - postgres
    - postgresql
    - pg

- name: Install AVChecker
  hosts:
    - hacluster
  become: true
  gather_facts: false
  roles:
    - avchecker
  tags:
    - avchecker
    - availability_checker

- name: Install haproxy, keepalived and pgroute66
  hosts:
    - router
  become: true
  gather_facts: false
  roles:
    - haproxy
    - keepalived
    - pgroute66
  tags:
    - haproxy
    - router
    - keepalived
    - pgroute66

- name: Install PGQuartz
  hosts:
    - postgres
  become: true
  gather_facts: false
  roles:
    - pgquartz
  tags:
    - pgquartz
