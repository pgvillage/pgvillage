---
- name: "Gather facts on all servers"
  hosts:
    - all
  become: true
  gather_facts: true

- hosts:
    - etcd
    - etcd_master
  become: true
  gather_facts: false
  roles:
    - andrewrothstein.etcd-cluster
  tags: 
    - etcd

- hosts:
    - backup
  become: true
  gather_facts: false
  roles:
    - atosatto.minio
  tags: 
    - minio

- hosts:
    - postgres
  become: true
  gather_facts: false
  roles:
    - postgresql
  tags:
    - postgres
    - postgresql
    - pg

- hosts:
    - hacluster
  become: true
  gather_facts: false
  roles:
    - kostiantyn-nemchenko.patroni
  tags:
    - patroni

- hosts:
    - hacluster
  become: true
  gather_facts: false
  roles:
    - stolon
  tags:
    - stolon

- hosts:
    - hacluster
  become: true
  gather_facts: false
  roles:
    - dudefellah.pgbackrest
  tags:
    - pgbr
    - pgbackrest

- hosts:
    - hacluster
  become: true
  gather_facts: false
  roles:
    - wal_g
  tags:
    - wal_g
    - walg

- hosts:
    - monitoring
  become: true
  gather_facts: false
  roles:
    - pgwatch2
    - cloudalchemy.grafana
  tags:
    - pgwatch2
